---
page_title: "Data Source vy_ecs_image - vy"
subcategory: "Version Handler V2"
description: |-
  Get information about a specific ECS image version. Images are uploaded to ECR during the CI process.
---

# Data Source: vy_ecs_image

Get information about a specific ECS image version. Images are uploaded to ECR during the CI process.

## Usage

```terraform
data "vy_ecs_image" "this" {
  github_repository_name = "infrademo-demo-app"
}

# Use the version in an ECS task definition
module "task" {
  source = "github.com/nsbno/terraform-aws-ecs-service?ref=x.y.z"

  application_container = {
    name  = "backend"
    image = data.vy_ecs_image.this
  }
}
```

## Override ECR Repository
Normally, the data source retrieve ECR images from the CI process where an image is packaged to ECR.
This example shows how to override the default ECR repository used by the data source.

```terraform
data "vy_ecs_image" "this" {
  github_repository_name = "infrademo-demo-app"

  # To override the ECR repository name, specify it here
  ecr_repository_name = "petstore-lambda"
}

module "lambda" {
  source = "github.com/nsbno/terraform-aws-ecs-service?ref=x.y.z"

  application_container = {
    name  = "user-service"
    image = data.vy_ecs_image.this
  }
}
```

## Monorepo Usage

```terraform
data "vy_ecs_image" "user_service" {
  github_repository_name = "infrademo-demo-app"

  # Path to the directory within the monorepo where the service code is located
  working_directory = "services/user_service"
}

module "user_service_ecs" {
  source = "github.com/nsbno/terraform-aws-ecs-service?ref=x.y.z"

  application_container = {
    name  = "user-service"
    image = data.vy_ecs_image.user_service
  }
}

data "vy_ecs_image" "payment_service" {
  github_repository_name = "infrademo-demo-app"

  # Path to the directory within the monorepo where the service code is located
  working_directory = "services/payment_service"
}

module "payment_service_ecs" {
  source = "github.com/nsbno/terraform-aws-ecs-service?ref=x.y.z"

  application_container = {
    name  = "payment-service"
    image = data.vy_ecs_image.payment_service
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ecr_repository_name` (String) The ECR repository name where the ECS image is stored.
- `github_repository_name` (String) The GitHub repository name for the ECS service.

### Optional

- `working_directory` (String) The directory in the GitHub repository where the code is stored.

### Read-Only

- `branch` (String) The Git branch of the commit that was used to build the image.
- `ecr_repository_uri` (String) The ECR repository URI where the image is stored.
- `git_sha` (String) The Git SHA of the commit that was used to build the image.
- `id` (String) The ID of this resource.
- `region` (String) The AWS region where the image is stored.
- `service_account_id` (String) The service account ID that was used to build the image.
